<!DOCTYPE html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Distributed Systems and Storage &mdash; Distributed Systems alpha documentation</title>
    
    <link rel="stylesheet" href="_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="_static/bootswatch-3.3.4/united/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="_static/bootstrap-sphinx.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     'alpha',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/javascript" src="_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="_static/bootstrap-3.3.4/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="_static/bootstrap-sphinx.js"></script>
    <link rel="top" title="Distributed Systems alpha documentation" href="index.html" />
    <link rel="next" title="Directories and LDAP" href="directories.html" />
    <link rel="prev" title="Concurrency and Threads" href="concurrency.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">

  </head>
  <body role="document">
  


  <div id="navbar" class="navbar navbar-inverse navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="index.html">
          COMP 339-439</a>
        <span class="navbar-text navbar-version pull-left"><b>v0.5</b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
                <li><a href="genindex.html">Index</a></li>
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="index.html">Site <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><ul class="current">
<li class="toctree-l1"><a class="reference internal" href="issues.html">Introduction and Issues</a><ul>
<li class="toctree-l2"><a class="reference internal" href="issues.html#what-is-a-distributed-system">What is a distributed system?</a></li>
<li class="toctree-l2"><a class="reference internal" href="issues.html#examples">Examples</a></li>
<li class="toctree-l2"><a class="reference internal" href="issues.html#illustration">Illustration</a></li>
<li class="toctree-l2"><a class="reference internal" href="issues.html#advantages-of-distributed-systems-vs-centralized">Advantages of Distributed Systems vs. Centralized</a></li>
<li class="toctree-l2"><a class="reference internal" href="issues.html#advantages-of-distributed-systems-vs-standalones">Advantages of Distributed Systems vs. Standalones</a></li>
<li class="toctree-l2"><a class="reference internal" href="issues.html#disadvantages-of-distributed-systems">Disadvantages of Distributed Systems</a></li>
<li class="toctree-l2"><a class="reference internal" href="issues.html#key-characteristics">Key Characteristics</a></li>
<li class="toctree-l2"><a class="reference internal" href="issues.html#resource-sharing">Resource Sharing</a></li>
<li class="toctree-l2"><a class="reference internal" href="issues.html#resources-must-be-managed">Resources Must be Managed</a></li>
<li class="toctree-l2"><a class="reference internal" href="issues.html#openness">Openness</a></li>
<li class="toctree-l2"><a class="reference internal" href="issues.html#open-distributed-systems">Open Distributed Systems</a></li>
<li class="toctree-l2"><a class="reference internal" href="issues.html#concurrency">Concurrency</a></li>
<li class="toctree-l2"><a class="reference internal" href="issues.html#scalability">Scalability</a></li>
<li class="toctree-l2"><a class="reference internal" href="issues.html#fault-tolerance">Fault Tolerance</a></li>
<li class="toctree-l2"><a class="reference internal" href="issues.html#transparency">Transparency</a></li>
<li class="toctree-l2"><a class="reference internal" href="issues.html#design-issues">Design Issues</a></li>
<li class="toctree-l2"><a class="reference internal" href="issues.html#issues-arising-from-distributed-systems">Issues arising from Distributed Systems</a></li>
<li class="toctree-l2"><a class="reference internal" href="issues.html#naming">Naming</a></li>
<li class="toctree-l2"><a class="reference internal" href="issues.html#naming-name-resolution">Naming - Name Resolution</a></li>
<li class="toctree-l2"><a class="reference internal" href="issues.html#naming-design-considerations">Naming - Design Considerations</a></li>
<li class="toctree-l2"><a class="reference internal" href="issues.html#communication">Communication</a></li>
<li class="toctree-l2"><a class="reference internal" href="issues.html#types-of-communication">Types of Communication</a></li>
<li class="toctree-l2"><a class="reference internal" href="issues.html#client-server-communication">Client-Server Communication</a></li>
<li class="toctree-l2"><a class="reference internal" href="issues.html#id1">Client-Server Communication</a></li>
<li class="toctree-l2"><a class="reference internal" href="issues.html#group-multicast">Group Multicast</a></li>
<li class="toctree-l2"><a class="reference internal" href="issues.html#software-structure">Software Structure</a></li>
<li class="toctree-l2"><a class="reference internal" href="issues.html#distributed-system-software-structure">Distributed System Software Structure</a></li>
<li class="toctree-l2"><a class="reference internal" href="issues.html#consistency-management">Consistency Management</a></li>
<li class="toctree-l2"><a class="reference internal" href="issues.html#caching">Caching</a></li>
<li class="toctree-l2"><a class="reference internal" href="issues.html#consistency">Consistency</a></li>
<li class="toctree-l2"><a class="reference internal" href="issues.html#workload-allocation">Workload Allocation</a></li>
<li class="toctree-l2"><a class="reference internal" href="issues.html#processor-pool-model">Processor Pool Model</a></li>
<li class="toctree-l2"><a class="reference internal" href="issues.html#quality-of-service">Quality-of-Service</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="networking.html">Networking Primer</a><ul>
<li class="toctree-l2"><a class="reference internal" href="networking.html#networks">Networks</a></li>
<li class="toctree-l2"><a class="reference internal" href="networking.html#many-types-of-networks">Many Types of Networks</a></li>
<li class="toctree-l2"><a class="reference internal" href="networking.html#id1">Many Types of Networks</a></li>
<li class="toctree-l2"><a class="reference internal" href="networking.html#id2">Many Types of Networks</a></li>
<li class="toctree-l2"><a class="reference internal" href="networking.html#internetworks">Internetworks</a></li>
<li class="toctree-l2"><a class="reference internal" href="networking.html#performance-issues">Performance Issues</a></li>
<li class="toctree-l2"><a class="reference internal" href="networking.html#example-a-typical-campus-network">Example- A Typical Campus Network</a></li>
<li class="toctree-l2"><a class="reference internal" href="networking.html#network-topologies">Network Topologies</a></li>
<li class="toctree-l2"><a class="reference internal" href="networking.html#id3">Network Topologies</a></li>
<li class="toctree-l2"><a class="reference internal" href="networking.html#a-network-is-not-an-island">A Network is not an Island</a></li>
<li class="toctree-l2"><a class="reference internal" href="networking.html#design-issues-in-layers">Design Issues In Layers</a></li>
<li class="toctree-l2"><a class="reference internal" href="networking.html#protocols-are-divided-into-layers">Protocols are divided into layers</a></li>
<li class="toctree-l2"><a class="reference internal" href="networking.html#physical-layer">Physical Layer</a></li>
<li class="toctree-l2"><a class="reference internal" href="networking.html#data-link-layer">Data Link Layer</a></li>
<li class="toctree-l2"><a class="reference internal" href="networking.html#the-network-layer">The Network Layer</a></li>
<li class="toctree-l2"><a class="reference internal" href="networking.html#the-transport-layer">The Transport Layer</a></li>
<li class="toctree-l2"><a class="reference internal" href="networking.html#the-session-presentation-layers">The Session &amp; Presentation Layers</a></li>
<li class="toctree-l2"><a class="reference internal" href="networking.html#application-layer">Application Layer</a></li>
<li class="toctree-l2"><a class="reference internal" href="networking.html#interprocess-communication">Interprocess Communication:</a></li>
<li class="toctree-l2"><a class="reference internal" href="networking.html#reliability">Reliability</a></li>
<li class="toctree-l2"><a class="reference internal" href="networking.html#mapping-data-to-messages">Mapping Data to Messages</a></li>
<li class="toctree-l2"><a class="reference internal" href="networking.html#marshaling">Marshaling</a></li>
<li class="toctree-l2"><a class="reference internal" href="networking.html#case-study-unix-interprocess-communication-ipc">Case Study: UNIX Interprocess Communication (IPC)</a></li>
<li class="toctree-l2"><a class="reference internal" href="networking.html#example-simple-tcp-messaging-framework-from-hpjpc">Example - Simple TCP Messaging Framework (from HPJPC)</a></li>
<li class="toctree-l2"><a class="reference internal" href="networking.html#message-class">Message class</a></li>
<li class="toctree-l2"><a class="reference internal" href="networking.html#messageclient-class">MessageClient class</a></li>
<li class="toctree-l2"><a class="reference internal" href="networking.html#messageserver-class">MessageServer class</a></li>
<li class="toctree-l2"><a class="reference internal" href="networking.html#messageserverdispatcher-class">MessageServerDispatcher class</a></li>
<li class="toctree-l2"><a class="reference internal" href="networking.html#dateservice-using-message-classes-interfaces">DateService using Message Classes/Interfaces</a></li>
<li class="toctree-l2"><a class="reference internal" href="networking.html#dateclient-using-message-classes-interfaces">DateClient using Message Classes/Interfaces</a></li>
<li class="toctree-l2"><a class="reference internal" href="networking.html#sockets-communication-using-datagram">Sockets Communication Using Datagram</a></li>
<li class="toctree-l2"><a class="reference internal" href="networking.html#stream-communication">Stream Communication</a></li>
<li class="toctree-l2"><a class="reference internal" href="networking.html#remote-procedure-call">Remote Procedure Call</a></li>
<li class="toctree-l2"><a class="reference internal" href="networking.html#remote-procedure-call-rpc">Remote Procedure Call (RPC)</a></li>
<li class="toctree-l2"><a class="reference internal" href="networking.html#observations">Observations</a></li>
<li class="toctree-l2"><a class="reference internal" href="networking.html#rpc">RPC</a></li>
<li class="toctree-l2"><a class="reference internal" href="networking.html#rpc-mechanisms">RPC Mechanisms</a></li>
<li class="toctree-l2"><a class="reference internal" href="networking.html#rpc-steps">RPC Steps</a></li>
<li class="toctree-l2"><a class="reference internal" href="networking.html#design-issues">Design Issues</a></li>
<li class="toctree-l2"><a class="reference internal" href="networking.html#parameter-passing">Parameter Passing</a></li>
<li class="toctree-l2"><a class="reference internal" href="networking.html#id4">Parameter Passing</a></li>
<li class="toctree-l2"><a class="reference internal" href="networking.html#binding">Binding</a></li>
<li class="toctree-l2"><a class="reference internal" href="networking.html#use-of-specification">Use of Specification</a></li>
<li class="toctree-l2"><a class="reference internal" href="networking.html#locating-the-server">Locating the Server</a></li>
<li class="toctree-l2"><a class="reference internal" href="networking.html#how-to-handle-failures">How to Handle Failures</a></li>
<li class="toctree-l2"><a class="reference internal" href="networking.html#client-cannot-locate-server">Client Cannot Locate Server</a></li>
<li class="toctree-l2"><a class="reference internal" href="networking.html#lost-request-message">Lost Request Message</a></li>
<li class="toctree-l2"><a class="reference internal" href="networking.html#lost-reply-message">Lost Reply Message</a></li>
<li class="toctree-l2"><a class="reference internal" href="networking.html#id5">Lost Reply Message</a></li>
<li class="toctree-l2"><a class="reference internal" href="networking.html#server-crashes">Server Crashes</a></li>
<li class="toctree-l2"><a class="reference internal" href="networking.html#id6">Server Crashes</a></li>
<li class="toctree-l2"><a class="reference internal" href="networking.html#client-crashes">Client Crashes</a></li>
<li class="toctree-l2"><a class="reference internal" href="networking.html#id7">Client Crashes</a></li>
<li class="toctree-l2"><a class="reference internal" href="networking.html#acknowledgments">Acknowledgments</a></li>
<li class="toctree-l2"><a class="reference internal" href="networking.html#flow-control">Flow Control</a></li>
<li class="toctree-l2"><a class="reference internal" href="networking.html#performance">Performance</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="concurrency.html">Concurrency and Threads</a><ul>
<li class="toctree-l2"><a class="reference internal" href="concurrency.html#threads-vs-processes">Threads vs Processes</a></li>
<li class="toctree-l2"><a class="reference internal" href="concurrency.html#what-are-processes-threads">What are Processes, Threads?</a></li>
<li class="toctree-l2"><a class="reference internal" href="concurrency.html#common-threading-use-cases">Common Threading Use Cases</a></li>
<li class="toctree-l2"><a class="reference internal" href="concurrency.html#mutual-exclusion">Mutual Exclusion</a></li>
<li class="toctree-l2"><a class="reference internal" href="concurrency.html#tools-for-achieving-mutual-exclusion">Tools for Achieving Mutual Exclusion</a></li>
<li class="toctree-l2"><a class="reference internal" href="concurrency.html#mutex-example-java">Mutex Example/Java</a></li>
<li class="toctree-l2"><a class="reference internal" href="concurrency.html#semaphore-example">Semaphore Example</a></li>
<li class="toctree-l2"><a class="reference internal" href="concurrency.html#barrier">Barrier</a></li>
<li class="toctree-l2"><a class="reference internal" href="concurrency.html#deadlock-a-classic-problem">Deadlock - a classic problem</a></li>
<li class="toctree-l2"><a class="reference internal" href="concurrency.html#fork">Fork</a></li>
<li class="toctree-l2"><a class="reference internal" href="concurrency.html#diner0">Diner0</a></li>
<li class="toctree-l2"><a class="reference internal" href="concurrency.html#diners0">Diners0</a></li>
<li class="toctree-l2"><a class="reference internal" href="concurrency.html#diners1-eliminating-deadlock-with-resource-enumeration">Diners1 - eliminating deadlock with resource enumeration</a></li>
<li class="toctree-l2"><a class="reference internal" href="concurrency.html#execution-with-deadlock">Execution - With Deadlock</a></li>
<li class="toctree-l2"><a class="reference internal" href="concurrency.html#deadlock-free-version">Deadlock-Free Version</a></li>
<li class="toctree-l2"><a class="reference internal" href="concurrency.html#common-data-structures-in-concurrent-programming">Common Data Structures in Concurrent Programming</a></li>
<li class="toctree-l2"><a class="reference internal" href="concurrency.html#design-considerations">Design Considerations</a></li>
<li class="toctree-l2"><a class="reference internal" href="concurrency.html#kernel-threads-vs-user-mode-threads">Kernel Threads vs User Mode Threads</a></li>
<li class="toctree-l2"><a class="reference internal" href="concurrency.html#concurrent-file-copy-example">Concurrent File Copy Example</a></li>
<li class="toctree-l2"><a class="reference internal" href="concurrency.html#sequential-file-copy">Sequential File Copy</a></li>
<li class="toctree-l2"><a class="reference internal" href="concurrency.html#concurrent-file-copy-organization">Concurrent File Copy Organization</a></li>
<li class="toctree-l2"><a class="reference internal" href="concurrency.html#execution">Execution</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="current reference internal" href="">Distributed Systems and Storage</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#types-of-non-local-storage">Types of Non-Local Storage</a></li>
<li class="toctree-l2"><a class="reference internal" href="#how-do-we-evaluate-storage-systems">How Do We Evaluate Storage Systems?</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="#storage-devices">Storage Devices</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#storage-and-failure">Storage and Failure</a></li>
<li class="toctree-l2"><a class="reference internal" href="#maximizing-availability-raid">Maximizing Availability - RAID</a></li>
<li class="toctree-l2"><a class="reference internal" href="#raid">RAID</a></li>
<li class="toctree-l2"><a class="reference internal" href="#raid-0">RAID - 0</a></li>
<li class="toctree-l2"><a class="reference internal" href="#raid-1">RAID - 1</a></li>
<li class="toctree-l2"><a class="reference internal" href="#raid-5">RAID - 5</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="#local-storage">Local Storage</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#implementing-files-and-folders">Implementing Files and Folders</a></li>
<li class="toctree-l2"><a class="reference internal" href="#inodes">Inodes</a></li>
<li class="toctree-l2"><a class="reference internal" href="#inodes-indirect-blocks">Inodes - Indirect Blocks</a></li>
<li class="toctree-l2"><a class="reference internal" href="#block-caches">Block Caches</a></li>
<li class="toctree-l2"><a class="reference internal" href="#folders-and-path-traversal">Folders and Path Traversal</a></li>
<li class="toctree-l2"><a class="reference internal" href="#virtual-filesystems-vfs">Virtual Filesystems / VFS</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id1">Virtual Filesystems / VFS</a></li>
<li class="toctree-l2"><a class="reference internal" href="#virtual-filesystems-and-stacking">Virtual Filesystems and Stacking</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="#distributed-filesystems">Distributed Filesystems</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#file-service-model">File Service Model</a></li>
<li class="toctree-l2"><a class="reference internal" href="#directory-service">Directory Service</a></li>
<li class="toctree-l2"><a class="reference internal" href="#naming-transparency">Naming Transparency</a></li>
<li class="toctree-l2"><a class="reference internal" href="#file-sharing-semantics">File Sharing Semantics</a></li>
<li class="toctree-l2"><a class="reference internal" href="#unix-semantics">UNIX Semantics</a></li>
<li class="toctree-l2"><a class="reference internal" href="#more-semantics">More Semantics</a></li>
<li class="toctree-l2"><a class="reference internal" href="#distributed-file-system-implementation">Distributed File System Implementation</a></li>
<li class="toctree-l2"><a class="reference internal" href="#system-structure">System Structure</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id2">Directory Service</a></li>
<li class="toctree-l2"><a class="reference internal" href="#stateless-versus-stateful">Stateless versus Stateful</a></li>
<li class="toctree-l2"><a class="reference internal" href="#caching">Caching</a></li>
<li class="toctree-l2"><a class="reference internal" href="#caching-server">Caching - Server</a></li>
<li class="toctree-l2"><a class="reference internal" href="#caching-client">Caching - Client</a></li>
<li class="toctree-l2"><a class="reference internal" href="#client-cache-consistency">Client - Cache Consistency</a></li>
<li class="toctree-l2"><a class="reference internal" href="#client-cache-consistency-other-options">Client - Cache Consistency - Other Options</a></li>
<li class="toctree-l2"><a class="reference internal" href="#replication">Replication</a></li>
<li class="toctree-l2"><a class="reference internal" href="#replication-update-protocols">Replication - Update Protocols</a></li>
<li class="toctree-l2"><a class="reference internal" href="#replication-voting-algorithm">Replication - Voting Algorithm</a></li>
<li class="toctree-l2"><a class="reference internal" href="#replication-general-quorum-algorithm">Replication - General Quorum Algorithm</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="#case-study-sun-nfs">Case Study - SUN NFS</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#sun-nfs-implementation">SUN NFS - Implementation</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="directories.html">Directories and LDAP</a><ul>
<li class="toctree-l2"><a class="reference internal" href="directories.html#what-is-a-directory">What is a Directory?</a></li>
<li class="toctree-l2"><a class="reference internal" href="directories.html#what-is-not-a-directory">What is NOT a Directory?</a></li>
<li class="toctree-l2"><a class="reference internal" href="directories.html#types">Types</a></li>
<li class="toctree-l2"><a class="reference internal" href="directories.html#characteristics-of-directories">Characteristics of Directories</a></li>
<li class="toctree-l2"><a class="reference internal" href="directories.html#evolution-of-directories">Evolution of Directories</a></li>
<li class="toctree-l2"><a class="reference internal" href="directories.html#so-what-is-ldap-exactly">So what is LDAP, exactly?</a></li>
<li class="toctree-l2"><a class="reference internal" href="directories.html#early-ldap-implementations">Early LDAP Implementations</a></li>
<li class="toctree-l2"><a class="reference internal" href="directories.html#slapd-stand-alone-ldap-daemon">SLAPD: Stand-alone LDAP Daemon</a></li>
<li class="toctree-l2"><a class="reference internal" href="directories.html#slapd-continued">SLAPD: Continued</a></li>
<li class="toctree-l2"><a class="reference internal" href="directories.html#ldap-client-server-exchange-protocol">LDAP Client-Server Exchange Protocol</a></li>
<li class="toctree-l2"><a class="reference internal" href="directories.html#example-ldap-usage">Example LDAP Usage</a></li>
<li class="toctree-l2"><a class="reference internal" href="directories.html#schemas">Schemas</a></li>
<li class="toctree-l2"><a class="reference internal" href="directories.html#attributes-and-objectclasses">attributes and objectclasses</a></li>
<li class="toctree-l2"><a class="reference internal" href="directories.html#namespaces">Namespaces</a></li>
<li class="toctree-l2"><a class="reference internal" href="directories.html#ldap-tree-topology">LDAP Tree Topology</a></li>
<li class="toctree-l2"><a class="reference internal" href="directories.html#network-architecture">Network Architecture</a></li>
<li class="toctree-l2"><a class="reference internal" href="directories.html#distributed-ldap-server-model">Distributed LDAP Server Model</a></li>
<li class="toctree-l2"><a class="reference internal" href="directories.html#ldif-example">LDIF Example</a></li>
<li class="toctree-l2"><a class="reference internal" href="directories.html#acknowledgements">Acknowledgements</a></li>
<li class="toctree-l2"><a class="reference internal" href="directories.html#references">References</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="ci.html">Continuous Integration</a><ul>
<li class="toctree-l2"><a class="reference internal" href="ci.html#what-does-continuous-integration-do">What Does Continuous Integration Do?</a></li>
<li class="toctree-l2"><a class="reference internal" href="ci.html#how-often-is-continuous-integration-run">How Often is Continuous Integration Run?</a></li>
<li class="toctree-l2"><a class="reference internal" href="ci.html#what-are-the-bits-and-pieces-of-continuous-integration">What are the Bits and Pieces of Continuous Integration?</a></li>
<li class="toctree-l2"><a class="reference internal" href="ci.html#continuous-integration-products-vendors">Continuous Integration Products / Vendors</a></li>
<li class="toctree-l2"><a class="reference internal" href="ci.html#continuous-integration-and-the-key-characteristics-of-distributed-systems">Continuous Integration and the Key Characteristics of Distributed Systems</a></li>
<li class="toctree-l2"><a class="reference internal" href="ci.html#case-study-my-simple-ci-system">Case Study - My Simple CI System</a></li>
<li class="toctree-l2"><a class="reference internal" href="ci.html#the-front-page-of-team-city">The Front Page of Team City</a></li>
<li class="toctree-l2"><a class="reference internal" href="ci.html#build-nodes">Build Nodes</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="maven.html">Project Build Management With Maven</a><ul>
<li class="toctree-l2"><a class="reference internal" href="maven.html#introduction">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="maven.html#creating-a-maven-project-from-scratch">Creating a Maven Project from Scratch</a></li>
<li class="toctree-l2"><a class="reference internal" href="maven.html#generating-an-eclipse-project-from-a-maven-project">Generating an Eclipse Project from a Maven Project</a></li>
<li class="toctree-l2"><a class="reference internal" href="maven.html#configuring-eclipse">Configuring Eclipse</a></li>
<li class="toctree-l2"><a class="reference internal" href="maven.html#running-unit-tests-with-maven">Running Unit tests with Maven</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="sphinx.html">Writing with Sphinx</a><ul>
<li class="toctree-l2"><a class="reference internal" href="sphinx.html#introduction">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="sphinx.html#about-sphinx">About Sphinx</a></li>
<li class="toctree-l2"><a class="reference internal" href="sphinx.html#additional-resources">Additional Resources</a></li>
<li class="toctree-l2"><a class="reference internal" href="sphinx.html#setting-up-sphinx-ubuntu-linux">Setting up Sphinx - Ubuntu Linux</a></li>
<li class="toctree-l2"><a class="reference internal" href="sphinx.html#sphinx-on-non-linux-platforms">Sphinx on non-Linux Platforms</a></li>
<li class="toctree-l2"><a class="reference internal" href="sphinx.html#setting-up-sphinx-mac-osx-using-homebrew-instead-of-macports">Setting up Sphinx - Mac OSX (Using HomeBrew instead of MacPorts)</a></li>
<li class="toctree-l2"><a class="reference internal" href="sphinx.html#setting-up-sphinx-windows">Setting up Sphinx - Windows</a></li>
<li class="toctree-l2"><a class="reference internal" href="sphinx.html#setting-up-sphinx-in-a-python-virtualenv">Setting up Sphinx in a Python virtualenv</a></li>
<li class="toctree-l2"><a class="reference internal" href="sphinx.html#authoring-in-sphinx">Authoring in Sphinx</a></li>
<li class="toctree-l2"><a class="reference internal" href="sphinx.html#examples">Examples</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="clocks.html">Clocks and Synchronization</a><ul>
<li class="toctree-l2"><a class="reference internal" href="clocks.html#what-is-time-some-physics">What is Time? Some Physics</a></li>
<li class="toctree-l2"><a class="reference internal" href="clocks.html#time-and-computation">Time and Computation</a></li>
<li class="toctree-l2"><a class="reference internal" href="clocks.html#physical-clocks">Physical Clocks</a></li>
<li class="toctree-l2"><a class="reference internal" href="clocks.html#physical-clocks-multiple-systems">Physical Clocks - Multiple Systems</a></li>
<li class="toctree-l2"><a class="reference internal" href="clocks.html#clock-synchronization">Clock Synchronization</a></li>
<li class="toctree-l2"><a class="reference internal" href="clocks.html#clocks-synchronization-and-reliability">Clocks Synchronization and Reliability</a></li>
<li class="toctree-l2"><a class="reference internal" href="clocks.html#lamports-logical-clocks">Lamport’s Logical Clocks</a></li>
<li class="toctree-l2"><a class="reference internal" href="clocks.html#implementing-lamports-logical-clocks">Implementing Lamport’s Logical Clocks</a></li>
<li class="toctree-l2"><a class="reference internal" href="clocks.html#limitations-of-lamports-logical-clocks">Limitations of Lamport’s Logical Clocks</a></li>
<li class="toctree-l2"><a class="reference internal" href="clocks.html#vector-clocks">Vector Clocks</a></li>
<li class="toctree-l2"><a class="reference internal" href="clocks.html#implementing-vector-clocks">Implementing Vector Clocks</a></li>
<li class="toctree-l2"><a class="reference internal" href="clocks.html#so-what-did-we-get-out-of-all-of-this">So... What Did We Get Out of All of This?</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="dns.html">Domain Name Service</a></li>
<li class="toctree-l1"><a class="reference internal" href="mpi.html">Message Passing Interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="corba.html">Object Brokers and CORBA</a></li>
<li class="toctree-l1"><a class="reference internal" href="rest.html">REST and Web Services</a></li>
<li class="toctree-l1"><a class="reference internal" href="nosql.html">NoSQL and Sharding</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="lectures.html">Legacy Lectures</a><ul>
<li class="toctree-l2"><a class="reference internal" href="lectures.html#software">Software</a></li>
<li class="toctree-l2"><a class="reference internal" href="lectures.html#introduction">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="lectures.html#networking-overview">Networking Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="lectures.html#threads-and-processes">Threads and Processes</a></li>
<li class="toctree-l2"><a class="reference internal" href="lectures.html#filesystems">Filesystems</a></li>
<li class="toctree-l2"><a class="reference internal" href="lectures.html#filesystems-research-at-luc">Filesystems Research at LUC</a></li>
<li class="toctree-l2"><a class="reference internal" href="lectures.html#grids-and-clouds">Grids and Clouds</a></li>
<li class="toctree-l2"><a class="reference internal" href="lectures.html#message-passing-messaging-middleware">Message Passing / Messaging Middleware</a></li>
<li class="toctree-l2"><a class="reference internal" href="lectures.html#distributed-object-programming">Distributed Object Programming</a></li>
<li class="toctree-l2"><a class="reference internal" href="lectures.html#modern-distributed-databases">Modern Distributed Databases</a></li>
</ul>
</li>
</ul>
</ul>
</li>
              
                <li class="dropdown">
  <a role="button"
     id="dLabelLocalToc"
     data-toggle="dropdown"
     data-target="#"
     href="#">Page <b class="caret"></b></a>
  <ul class="dropdown-menu localtoc"
      role="menu"
      aria-labelledby="dLabelLocalToc"><ul>
<li><a class="reference internal" href="#">Distributed Systems and Storage</a><ul>
<li><a class="reference internal" href="#types-of-non-local-storage">Types of Non-Local Storage</a></li>
<li><a class="reference internal" href="#how-do-we-evaluate-storage-systems">How Do We Evaluate Storage Systems?</a></li>
</ul>
</li>
<li><a class="reference internal" href="#storage-devices">Storage Devices</a><ul>
<li><a class="reference internal" href="#storage-and-failure">Storage and Failure</a></li>
<li><a class="reference internal" href="#maximizing-availability-raid">Maximizing Availability - RAID</a></li>
<li><a class="reference internal" href="#raid">RAID</a></li>
<li><a class="reference internal" href="#raid-0">RAID - 0</a></li>
<li><a class="reference internal" href="#raid-1">RAID - 1</a></li>
<li><a class="reference internal" href="#raid-5">RAID - 5</a></li>
</ul>
</li>
<li><a class="reference internal" href="#local-storage">Local Storage</a><ul>
<li><a class="reference internal" href="#implementing-files-and-folders">Implementing Files and Folders</a></li>
<li><a class="reference internal" href="#inodes">Inodes</a></li>
<li><a class="reference internal" href="#inodes-indirect-blocks">Inodes - Indirect Blocks</a></li>
<li><a class="reference internal" href="#block-caches">Block Caches</a></li>
<li><a class="reference internal" href="#folders-and-path-traversal">Folders and Path Traversal</a></li>
<li><a class="reference internal" href="#virtual-filesystems-vfs">Virtual Filesystems / VFS</a></li>
<li><a class="reference internal" href="#id1">Virtual Filesystems / VFS</a></li>
<li><a class="reference internal" href="#virtual-filesystems-and-stacking">Virtual Filesystems and Stacking</a></li>
</ul>
</li>
<li><a class="reference internal" href="#distributed-filesystems">Distributed Filesystems</a><ul>
<li><a class="reference internal" href="#file-service-model">File Service Model</a></li>
<li><a class="reference internal" href="#directory-service">Directory Service</a></li>
<li><a class="reference internal" href="#naming-transparency">Naming Transparency</a></li>
<li><a class="reference internal" href="#file-sharing-semantics">File Sharing Semantics</a></li>
<li><a class="reference internal" href="#unix-semantics">UNIX Semantics</a></li>
<li><a class="reference internal" href="#more-semantics">More Semantics</a></li>
<li><a class="reference internal" href="#distributed-file-system-implementation">Distributed File System Implementation</a></li>
<li><a class="reference internal" href="#system-structure">System Structure</a></li>
<li><a class="reference internal" href="#id2">Directory Service</a></li>
<li><a class="reference internal" href="#stateless-versus-stateful">Stateless versus Stateful</a></li>
<li><a class="reference internal" href="#caching">Caching</a></li>
<li><a class="reference internal" href="#caching-server">Caching - Server</a></li>
<li><a class="reference internal" href="#caching-client">Caching - Client</a></li>
<li><a class="reference internal" href="#client-cache-consistency">Client - Cache Consistency</a></li>
<li><a class="reference internal" href="#client-cache-consistency-other-options">Client - Cache Consistency - Other Options</a></li>
<li><a class="reference internal" href="#replication">Replication</a></li>
<li><a class="reference internal" href="#replication-update-protocols">Replication - Update Protocols</a></li>
<li><a class="reference internal" href="#replication-voting-algorithm">Replication - Voting Algorithm</a></li>
<li><a class="reference internal" href="#replication-general-quorum-algorithm">Replication - General Quorum Algorithm</a></li>
</ul>
</li>
<li><a class="reference internal" href="#case-study-sun-nfs">Case Study - SUN NFS</a><ul>
<li><a class="reference internal" href="#sun-nfs-implementation">SUN NFS - Implementation</a></li>
</ul>
</li>
</ul>
</ul>
</li>
              
            
            
              
                
  <li>
    <a href="concurrency.html" title="Previous Chapter: Concurrency and Threads">
      <span class="glyphicon glyphicon-chevron-left"></span>
    </a>
  </li>
  <li>
    <a href="directories.html" title="Next Chapter: Directories and LDAP">
      <span class="glyphicon glyphicon-chevron-right"></span>
    </a>
  </li>
              
            
            
            
            
              <li class="hidden-sm">
<div id="sourcelink">
  <a href="_sources/storage.txt"
     rel="nofollow">Source</a>
</div></li>
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
    <div class="col-md-12">
      
  <div class="section" id="distributed-systems-and-storage">
<h1>Distributed Systems and Storage<a class="headerlink" href="#distributed-systems-and-storage" title="Permalink to this headline">¶</a></h1>
<div class="section" id="types-of-non-local-storage">
<h2>Types of Non-Local Storage<a class="headerlink" href="#types-of-non-local-storage" title="Permalink to this headline">¶</a></h2>
<ol class="arabic simple">
<li>SANs - Storage Area Networks</li>
<li>NASs - Network Area Storage</li>
<li>NFS/CIFS - Network File System / Common Internet File System</li>
<li>Cloud Storage / Sync Services</li>
<li>Distributed File Systems</li>
<li>Parallel File Systems</li>
</ol>
</div>
<div class="section" id="how-do-we-evaluate-storage-systems">
<h2>How Do We Evaluate Storage Systems?<a class="headerlink" href="#how-do-we-evaluate-storage-systems" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><ul class="simple">
<li>Latency - How long does a single operation of the smallest fundamental unit take to complete.</li>
<li>Throughput - How many bytes of data per second can we read or write</li>
<li>Parallel scaling - When several requests are issued at the same, or nearly the same time, how are latency and throughput affected.</li>
<li>Resilience to failure of storage components - How many and which types of storage hardware failures can be tolerated without the system availability being interrupted and how is performance affected.</li>
<li>Resilience to failure of network components - If a network is partitioned or fails, does the storage system remain consistent and how are partially complete operations handled</li>
<li>Semantics - What capabilities are offered to clients? Can existing files be re-written? Are there folders? Is random access possible? How are files locked and shared? Are there any transactional semantics?</li>
<li>Location Transparency</li>
</ul>
</div></blockquote>
</div>
</div>
<div class="section" id="storage-devices">
<h1>Storage Devices<a class="headerlink" href="#storage-devices" title="Permalink to this headline">¶</a></h1>
<ul class="simple">
<li>Types of permanent devices:<ul>
<li>Magnetic - hard disk, tape, floppy disk</li>
<li>Optical - CD/DVD/Blu-Ray, Laser Disc, Paper, Punch Cards, Photo
Film</li>
<li>Solid State - CMOS, NAND based flash, battery backed dynamic
memory</li>
</ul>
</li>
<li>Types of transient devices:<ul>
<li>RAM, Processor Caches</li>
</ul>
</li>
</ul>
<div class="section" id="storage-and-failure">
<h2>Storage and Failure<a class="headerlink" href="#storage-and-failure" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>An excellent paper about hard disk failure rates at Google is
available here:</li>
<li><a class="reference external" href="https://www.usenix.org/legacy/event/fast07/tech/full_papers/pinheiro/pinheiro.pdf">https://www.usenix.org/legacy/event/fast07/tech/full_papers/pinheiro/pinheiro.pdf</a></li>
<li>At Google, the failure rates of disks of a given age are:<ul>
<li>3-months - 2.5</li>
<li>6-months - 2.0</li>
<li>1-year - 2</li>
<li>2-year - 8</li>
<li>3-year - 8.5</li>
</ul>
</li>
</ul>
</div>
<div class="section" id="maximizing-availability-raid">
<h2>Maximizing Availability - RAID<a class="headerlink" href="#maximizing-availability-raid" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>To prevent the loss of availability of data, the use of RAID
(Redundant Array of Inexpensive Disks) allows for redundant copies of
data to be stored.</li>
<li>Common RAID levels are:<ul>
<li>RAID 0 - splits data across disks. Increases disk space and
provides no redundancy. 2 or more disks are needed.</li>
<li>RAID 1 - creates an exact copy of data on two or more disks.</li>
<li>RAID 5/6 - splits data across disks. Uses one or more disks for
parity. This allows 1-K out of N disks to fail and allow the data
of any lost disk to be recovered. 3 or more disks are needed.</li>
</ul>
</li>
</ul>
</div>
<div class="section" id="raid">
<h2>RAID<a class="headerlink" href="#raid" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>RAID has three common implementation approaches:<ul>
<li>Complete hardware implementation - a disk controller or expansion
card implements RAID. Several disks are connected to this
controller and it is presented to the operating system as a single
storage device. Often have reliability guarantees.</li>
<li>Partial hardware implementation - Same as the complete hardware
implementation, except parity calculations, and buffering are
delegated to the host CPU and memory. Don’t often have reliability
guarantees.</li>
<li>Software implementation - The operating system itself manages
several disks and presents to the file-system layer a single
storage device.</li>
</ul>
</li>
</ul>
</div>
<div class="section" id="raid-0">
<h2>RAID - 0<a class="headerlink" href="#raid-0" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><div class="figure align-center" id="id3">
<img alt="image" src="_images/raid_0.jpg" />
<p class="caption"><span class="caption-text">image</span></p>
</div>
</div></blockquote>
</div>
<div class="section" id="raid-1">
<h2>RAID - 1<a class="headerlink" href="#raid-1" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><div class="figure align-center" id="id4">
<img alt="image" src="_images/raid_1.jpg" />
<p class="caption"><span class="caption-text">image</span></p>
</div>
</div></blockquote>
</div>
<div class="section" id="raid-5">
<h2>RAID - 5<a class="headerlink" href="#raid-5" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><div class="figure align-center" id="id5">
<img alt="image" src="_images/raid_5.jpg" />
<p class="caption"><span class="caption-text">image</span></p>
</div>
</div></blockquote>
</div>
</div>
<div class="section" id="local-storage">
<h1>Local Storage<a class="headerlink" href="#local-storage" title="Permalink to this headline">¶</a></h1>
<blockquote>
<div><ul class="simple">
<li>At the basis of almost any distributed system are the factors involved in local storage systems.</li>
<li>The problems presented in local storage are simpler and less composed than in their distributed counter-parts.</li>
</ul>
</div></blockquote>
<div class="section" id="implementing-files-and-folders">
<h2>Implementing Files and Folders<a class="headerlink" href="#implementing-files-and-folders" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>How files and folders are implemented in a storage medium can greatly
depend upon the physical characteristics and capabilities of that
medium.</li>
<li>For example, on tape-drives, CD/DVD/Blu-Ray, or write-once media,
files and folders are stored contiguously with no fragmentation. All
of the information about the filesystem can be held in a TOC (Table
Of Contents).</li>
<li>For filesystems with files that have a finite lifetime, such as on
flash media, hard disks, SSDs, and others, the layout of files and
folders must be maintained in a more complex way.</li>
<li>Among these more advanced methods are linked lists and i-nodes.</li>
<li>To manage free-space, objects like bit-maps and linked lists are
possibilities.</li>
</ul>
</div>
<div class="section" id="inodes">
<h2>Inodes<a class="headerlink" href="#inodes" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>inodes are the fundamental structures of a UNIX filesystem</li>
<li>inodes have the following attributes:<ul>
<li>File Ownership - user, group</li>
<li>File Mode - rwx bits for each of user, group, and others</li>
<li>Last access and modified timestamps</li>
<li>File size in bytes</li>
<li>Device id</li>
<li>Pointers to blocks on the storage device for the file or folder’s
contents</li>
</ul>
</li>
</ul>
</div>
<div class="section" id="inodes-indirect-blocks">
<h2>Inodes - Indirect Blocks<a class="headerlink" href="#inodes-indirect-blocks" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>The strategy of using indirect, double indirect, and even triple
indirect blocks is a very successful implementation strategy</li>
<li>This approach is used by ext2 / ext3 / ext4 in Linux.</li>
</ul>
<div class="figure align-center">
<img alt="image" src="_images/ext2-inode.jpg" />
</div>
</div>
<div class="section" id="block-caches">
<h2>Block Caches<a class="headerlink" href="#block-caches" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>To improve the performance of a filesystem, and to make disk
scheduling algorithms more realizable, most operating systems
implement some kind of block cache.</li>
<li>The block cache allows for read-ahead and write-behind. It also
allows for lower latency I/O operations.</li>
<li>With a block cache, the write() system call for instance only needs
to complete modifications to the cache before returning. The
operating system can complete the operation on disk in a background
thread.</li>
<li>Without this cache, the system call would not be able to return until
the write had been committed to disk.</li>
<li>Important parameters of any block cache are:<ul>
<li>The size of the cache in physical memory</li>
<li>The delay before committing ’dirty’ items in the cache to disk</li>
</ul>
</li>
<li>The larger the cache, the better the filesystem will likely perform,
but this can come at the cost of available memory for programs.</li>
<li>The larger the delay before writing items to the disk, the better the
disk allocation and scheduling decisions the operating system can
make.</li>
<li>The shorter the delay before writing to disk, the greater the
guarantee in the presence of failure that modifications will be
persisted to disk.</li>
</ul>
</div>
<div class="section" id="folders-and-path-traversal">
<h2>Folders and Path Traversal<a class="headerlink" href="#folders-and-path-traversal" title="Permalink to this headline">¶</a></h2>
<ul>
<li><p class="first">In all but the most simple filesystems, there is a concept of a
folder and a path.</p>
</li>
<li><p class="first">In UNIX operating systems, folder entries are held within inodes that
have the filetype in the mode set to type directory.</p>
</li>
<li><p class="first">The contents of the inode then are a list of filenames and pointers
to the inodes of those files and/or folders.</p>
</li>
<li><p class="first">Resolving paths involve accessing a root folder, and accessing each
folder recursively until reaching a file or finding the folder to be
invalid.</p>
</li>
<li><p class="first">An example of path traversal. When traversing paths, the path may
cross into different filesystems.</p>
<blockquote>
<div><div class="figure align-center">
<img alt="image" src="_images/path_traversal.jpg" />
</div>
</div></blockquote>
</li>
</ul>
</div>
<div class="section" id="virtual-filesystems-vfs">
<h2>Virtual Filesystems / VFS<a class="headerlink" href="#virtual-filesystems-vfs" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>Aside from files and folders there are other things like named pipes,
domain sockets, symbolic and hard links that need to be handled by
the filesystem.</li>
<li>Rather than have the semantics of these implemented in each
filesystem implementation, many OS architectures include a virtual
filesystem or VFS.</li>
<li>The VFS stands between the OS kernel and the filesystem
implementation.</li>
</ul>
</div>
<div class="section" id="id1">
<h2>Virtual Filesystems / VFS<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>The VFS can help adapt both foreign filesystems (such as VFAT) by
producing a contract that these implementations can adapt to.</li>
<li>The VFS can also help reduce code duplication between FS
implementations by providing common structures and handling shared
behavior:<ul>
<li>Path traversal</li>
<li>Handling named pipes, domain sockets, etc...</li>
<li>Managing file handles and file locking</li>
<li>Structures and functions for the block cache.</li>
<li>Structures and functions for accessing storage devices</li>
</ul>
</li>
</ul>
</div>
<div class="section" id="virtual-filesystems-and-stacking">
<h2>Virtual Filesystems and Stacking<a class="headerlink" href="#virtual-filesystems-and-stacking" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>In some VFS implementations it is possible to stack filesystems on
top of each other.</li>
<li>A great example of this in Linux is UMSDOS: the base VFAT filesystem
does not have support for users, groups, security or extended
attributes. By creating special files on VFAT and then hiding them,
UMSDOS can adapt VFAT to be a UNIX-like filesystem</li>
<li>Another great example of this is UnionFS. It allows two filesystems
to be transparently overlaid.</li>
</ul>
</div>
</div>
<div class="section" id="distributed-filesystems">
<h1>Distributed Filesystems<a class="headerlink" href="#distributed-filesystems" title="Permalink to this headline">¶</a></h1>
<blockquote>
<div><ul>
<li><dl class="first docutils">
<dt>Flat file service</dt>
<dd><ul class="first last simple">
<li>implements operations on the contents of file</li>
<li>UFID (Unique File Ids) used to refer to files</li>
<li>new UFID assigned when file created</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Directory  service</dt>
<dd><ul class="first last simple">
<li>provides mapping between text names and UFIDs</li>
<li>Functions to create, update.. directories</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Client module</dt>
<dd><ul class="first last simple">
<li>runs on client computer</li>
<li>provides APIs to access files</li>
<li>holds information about network location of file server and directory server</li>
<li>sometimes caching at client</li>
</ul>
</dd>
</dl>
</li>
</ul>
</div></blockquote>
<div class="section" id="file-service-model">
<h2>File Service Model<a class="headerlink" href="#file-service-model" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><ul>
<li><dl class="first docutils">
<dt>Upload/download model</dt>
<dd><ul class="first last simple">
<li>read/write file operations</li>
<li>entire file transferred to client</li>
<li>requires space on client</li>
<li>Products like SkyDrive and DropBox work like this</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Remote Access Interface</dt>
<dd><ul class="first last">
<li><dl class="first docutils">
<dt>large number of operations</dt>
<dd><ul class="first last simple">
<li>seek, changing file attributes, read/write part of file…</li>
<li>does not require space (as much) on client</li>
</ul>
</dd>
</dl>
</li>
</ul>
</dd>
</dl>
</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="directory-service">
<h2>Directory Service<a class="headerlink" href="#directory-service" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><ul>
<li><dl class="first docutils">
<dt>Key issue for distributed file system</dt>
<dd><ul class="first last simple">
<li>whether all clients have the same VIEW of the directory hierarchy</li>
</ul>
</dd>
</dl>
</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="naming-transparency">
<h2>Naming Transparency<a class="headerlink" href="#naming-transparency" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><ul>
<li><dl class="first docutils">
<dt>Location Transparency</dt>
<dd><ul class="first last simple">
<li>path names give no hint as to where the files are located</li>
<li>e.g., /server1/dir1/dir2/X indicates X located on server1 but NOT where server1 is located</li>
<li>Problems? If X needs to be moved to another server (e.g., due to space) - say server2 - programs with strings built in will not work!</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Location Independence</dt>
<dd><ul class="first last simple">
<li>files can be moved without changing their names</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Three common approaches to file and directory naming</dt>
<dd><ul class="first last simple">
<li>Machine + path naming, such as /machine/path or machine:path (location dependent)</li>
<li>Mounting remote file systems onto the local file hierarchy (location dependent)</li>
<li>A single name space that looks the same on all machines (location independent)</li>
</ul>
</dd>
</dl>
</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="file-sharing-semantics">
<h2>File Sharing Semantics<a class="headerlink" href="#file-sharing-semantics" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>When files are shared (and one or more write) what are the semantics?</li>
</ul>
</div>
<div class="section" id="unix-semantics">
<h2>UNIX Semantics<a class="headerlink" href="#unix-semantics" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><ul>
<li><p class="first">A read is always provided with the last write (system enforces absolute time ordering)</p>
</li>
<li><dl class="first docutils">
<dt>UNIX semantic can be achieved by</dt>
<dd><ul class="first last simple">
<li>read/write going to server</li>
<li>no caching of files</li>
<li>sequential processing by server</li>
<li>BUT in distributed systems, this may perform poorly!</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>How to improve performance?</dt>
<dd><ul class="first last simple">
<li>requires caching</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Modify Semantics?</dt>
<dd><ul class="first last simple">
<li>“changes to an open file are initially visible only to the process that modified the file. When file closes, changed become visible to others”</li>
<li>Called Session Semantics</li>
</ul>
</dd>
</dl>
</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="more-semantics">
<h2>More Semantics<a class="headerlink" href="#more-semantics" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><ul>
<li><dl class="first docutils">
<dt>Q What is the result of multiple (simultaneous) updates of cached file?</dt>
<dd><ol class="first last arabic simple">
<li>final result depends on who closed last!</li>
<li>one of the results, but which one it is can not be specified (easier to implement)</li>
</ol>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Immutable Files</dt>
<dd><ul class="first last simple">
<li>can only create and read files</li>
<li>can replace existing file atomically</li>
<li>to modify a file, create new one and replace</li>
<li>what if two try to replace the same file?</li>
<li>what if one is reading while another tries to replace?</li>
</ul>
</dd>
</dl>
</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="distributed-file-system-implementation">
<h2>Distributed File System Implementation<a class="headerlink" href="#distributed-file-system-implementation" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><ul>
<li><dl class="first docutils">
<dt>Need to understand file usage (so that)</dt>
<dd><ul class="first last simple">
<li>implement common operations well</li>
<li>achieve efficiency</li>
</ul>
</dd>
</dl>
</li>
<li><p class="first">Satyanarayan (CMU) of file usage pattern on UNIX</p>
</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="system-structure">
<h2>System Structure<a class="headerlink" href="#system-structure" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><ul>
<li><dl class="first docutils">
<dt>How should the system be organized?</dt>
<dd><ul class="first last">
<li><p class="first">are clients and server different?</p>
</li>
<li><p class="first">how are file and directory services organized?</p>
</li>
<li><dl class="first docutils">
<dt>caching/no caching</dt>
<dd><ul class="first last simple">
<li>server</li>
<li>client</li>
</ul>
</dd>
</dl>
</li>
<li><p class="first">how are updates handled?</p>
</li>
<li><p class="first">sharing semantics?</p>
</li>
<li><p class="first">stateful versus stateless</p>
</li>
</ul>
</dd>
</dl>
</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="id2">
<h2>Directory Service<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h2>
<ul>
<li><dl class="first docutils">
<dt>Separate</dt>
<dd><ul class="first last simple">
<li>(-) requires going to directory servers to map symbolic names onto binary names</li>
<li>(+) functions are unrelated (e.g., implement DOS directory server and UNIX server- both use same file server</li>
<li>(+) simpler</li>
<li>requires more communication</li>
</ul>
</dd>
</dl>
</li>
<li><p class="first">Lookup</p>
</li>
</ul>
</div>
<div class="section" id="stateless-versus-stateful">
<h2>Stateless versus Stateful<a class="headerlink" href="#stateless-versus-stateful" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><ul>
<li><dl class="first docutils">
<dt>Stateless advantages</dt>
<dd><ul class="first last simple">
<li>Fault tolerance</li>
<li>No OPEN/CLOSE calls needed</li>
<li>No server space wasted on tables</li>
<li>No limits on number of open files</li>
<li>No problem if client crashes</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>For example,</dt>
<dd><ul class="first last simple">
<li>each request self contained</li>
<li>if server crashes - no information lost</li>
</ul>
</dd>
</dl>
</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="caching">
<h2>Caching<a class="headerlink" href="#caching" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><ul>
<li><dl class="first docutils">
<dt>One of the most important design considerations</dt>
<dd><ul class="first last simple">
<li>impacts performance</li>
<li>If caching  &#8211;  how should it be done?</li>
</ul>
</dd>
</dl>
</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="caching-server">
<h2>Caching - Server<a class="headerlink" href="#caching-server" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><ul>
<li><dl class="first docutils">
<dt>Server Disk</dt>
<dd><ul class="first last">
<li><p class="first">(+) most space</p>
</li>
<li><p class="first">(+) one copy of each file</p>
</li>
<li><p class="first">(+) no consistency problem</p>
</li>
<li><dl class="first docutils">
<dt>(-) performance</dt>
<dd><ul class="first last simple">
<li>each access requires disk access &#8211;&gt; server memory &#8211;&gt; network &#8211;&gt; client memory</li>
</ul>
</dd>
</dl>
</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Server Memory</dt>
<dd><ul class="first last">
<li><p class="first">keep MRU files in server’s memory</p>
</li>
<li><p class="first">If request satisfied from cache ==&gt; no disk transfer BUT still network transfer</p>
</li>
<li><ol class="first upperalpha" start="17">
<li><dl class="first docutils">
<dt>Unit of caching? Whole files</dt>
<dd><ul class="first last simple">
<li>(+) high speed transfer</li>
<li>(-) too much memory</li>
</ul>
</dd>
</dl>
</li>
</ol>
</li>
<li><p class="first">Blocks  + better use of space</p>
</li>
<li><ol class="first upperalpha" start="17">
<li><dl class="first docutils">
<dt>What to replace when cache full?</dt>
<dd><ul class="first last simple">
<li>LRU</li>
</ul>
</dd>
</dl>
</li>
</ol>
</li>
</ul>
</dd>
</dl>
</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="caching-client">
<h2>Caching - Client<a class="headerlink" href="#caching-client" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><ul>
<li><p class="first">Client Caching</p>
</li>
<li><dl class="first docutils">
<dt>Disk</dt>
<dd><ul class="first last simple">
<li>slower</li>
<li>more space</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Memory</dt>
<dd><ul class="first last simple">
<li>less space</li>
<li>faster</li>
</ul>
</dd>
</dl>
</li>
<li><p class="first">Where to cache?</p>
</li>
<li><dl class="first docutils">
<dt>User Address Space</dt>
<dd><ul class="first last simple">
<li>cache managed by system call library</li>
<li>library keeps most heavily used files</li>
<li>when process exits - written back to server</li>
<li>(+) simple</li>
<li>(+) low overhead</li>
<li>(-) effective if file repeatedly used</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Kernel</dt>
<dd><ul class="first last">
<li><p class="first">(-) kernel needed in all cases )even for a cache hit)</p>
</li>
<li><p class="first">(+) cache survives beyond process ( e.g., two pass compiler - file from first pass available in cache)</p>
</li>
<li><p class="first">(+) kernel free of file system</p>
</li>
<li><p class="first">(+) more flexible</p>
</li>
<li><dl class="first docutils">
<dt>little control over memory space allocation</dt>
<dd><ul class="first last simple">
<li>e.g., virtual memory may result in disk operation even if cache hit</li>
</ul>
</dd>
</dl>
</li>
</ul>
</dd>
</dl>
</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="client-cache-consistency">
<h2>Client - Cache Consistency<a class="headerlink" href="#client-cache-consistency" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><ul>
<li><dl class="first docutils">
<dt>client caching introduces inconsistency</dt>
<dd><ul class="first last simple">
<li>one or more writers and multiple readers</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Write-thru</dt>
<dd><ul class="first last simple">
<li>similar to between processor cache and memory</li>
<li>when a block modified - immediately sent to server (also kept in cache)</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>problem</dt>
<dd><ul class="first last">
<li><dl class="first docutils">
<dt>client on machine 1 reds file</dt>
<dd><ul class="first last simple">
<li>modify file (server updated)</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>client on machine 2 reads and modifies files</dt>
<dd><ul class="first last simple">
<li>server updated</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>another client on machine 1 reads file</dt>
<dd><ul class="first last simple">
<li>gets local copy (which is stale)</li>
</ul>
</dd>
</dl>
</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>solution: write-thru</dt>
<dd><ul class="first last">
<li><p class="first">cache manager checks with the server before providing file to client</p>
</li>
<li><dl class="first docutils">
<dt>If local copy upto-date</dt>
<dd><ul class="first last simple">
<li>provide to client</li>
</ul>
</dd>
</dl>
</li>
<li><p class="first">Else get from server</p>
</li>
<li><p class="first">RPC for check is not as expensive as file access</p>
</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Performance problems</dt>
<dd><ul class="first last simple">
<li>read is fine</li>
<li>each write generates network traffic (very expensive)</li>
<li>compromise - periodic updates (say 30 sec) of writes</li>
<li>collected and sent to server</li>
<li>eliminates writing of many scratch files completely (which otherwise would be written)</li>
</ul>
</dd>
</dl>
</li>
<li><p class="first">Note- semantics have changed for delayed writes</p>
</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="client-cache-consistency-other-options">
<h2>Client - Cache Consistency - Other Options<a class="headerlink" href="#client-cache-consistency-other-options" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><ul>
<li><dl class="first docutils">
<dt>Write-on-Close</dt>
<dd><ul class="first last">
<li><p class="first">session semantics</p>
</li>
<li><dl class="first docutils">
<dt>wait (delay - say 30 sec) after close to see if file deleted</dt>
<dd><ul class="first last simple">
<li>in that case write eliminated</li>
</ul>
</dd>
</dl>
</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Centralized Control</dt>
<dd><ul class="first last simple">
<li>File server keeps track of who has file and in what mode</li>
<li>if new request for read - server checks to see if file opened read/write</li>
<li>if read  - grant request</li>
<li>if write - deny request</li>
<li>when file closed - inform others</li>
<li>Many variations possible</li>
</ul>
</dd>
</dl>
</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="replication">
<h2>Replication<a class="headerlink" href="#replication" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><ul>
<li><dl class="first docutils">
<dt>Multiple copies of files for</dt>
<dd><ul class="first last simple">
<li>increased reliability so no data is lost</li>
<li>increased availability when one server is down</li>
<li>improved performance through division of load</li>
</ul>
</dd>
</dl>
</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="replication-update-protocols">
<h2>Replication - Update Protocols<a class="headerlink" href="#replication-update-protocols" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><ul>
<li><dl class="first docutils">
<dt>send update to each file in sequence</dt>
<dd><ul class="first last simple">
<li>problem - if process updating crashes in the middle ==&gt; inconsistent copies</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Primary Copy Replication</dt>
<dd><ul class="first last">
<li><p class="first">one server designed as primary</p>
</li>
<li><p class="first">primary updated (changes made locally by primary server)</p>
</li>
<li><p class="first">primary server updates secondary copies</p>
</li>
<li><p class="first">reads can be done from any copy</p>
</li>
<li><dl class="first docutils">
<dt>to guard against primary copy failure</dt>
<dd><ul class="first last simple">
<li>updates first stored on stable storage</li>
</ul>
</dd>
</dl>
</li>
<li><p class="first">But if primary copy down - No update can be made!!</p>
</li>
</ul>
</dd>
</dl>
</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="replication-voting-algorithm">
<h2>Replication - Voting Algorithm<a class="headerlink" href="#replication-voting-algorithm" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><ul>
<li><p class="first">Requires clients to acquire permission of multiple servers before reading/writing file</p>
</li>
<li><p class="first">File replicated on N servers - to update client needs to contact  majority , N/2 + 1 servers</p>
</li>
<li><p class="first">File changed and new version no assigned</p>
</li>
<li><dl class="first docutils">
<dt>To read - client contacts N/2 + 1 servers</dt>
<dd><ul class="first last simple">
<li>will always get the latest version</li>
</ul>
</dd>
</dl>
</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="replication-general-quorum-algorithm">
<h2>Replication - General Quorum Algorithm<a class="headerlink" href="#replication-general-quorum-algorithm" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><ul class="simple">
<li>No of replicas - N</li>
<li>Read Quorum - Nr</li>
<li>Write Quorum - Nw</li>
<li>Constraints  Nr + Nw &gt; N</li>
<li>Read/write requires participation of the corresponding quorum</li>
</ul>
</div></blockquote>
</div>
</div>
<div class="section" id="case-study-sun-nfs">
<h1>Case Study - SUN NFS<a class="headerlink" href="#case-study-sun-nfs" title="Permalink to this headline">¶</a></h1>
<blockquote>
<div><ul>
<li><dl class="first docutils">
<dt>NFS - Network File System</dt>
<dd><ul class="first last simple">
<li>designed to allow an arbitrary collection of clients and servers to share a common file system</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Design Goals</dt>
<dd><ul class="first last simple">
<li>heterogeneity</li>
<li>access transparency</li>
<li>local and remote accesses look the same - e.g., normal UNIX system calls</li>
<li>failure transparency</li>
<li>stateless</li>
<li>idempotent</li>
<li>performance transparency</li>
<li>client caching</li>
<li>server caching</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Location Transparency</dt>
<dd><ul class="first last simple">
<li>client establishes file name space by adding remote file systems to local name space</li>
<li>file system exported by servers (node holding it)</li>
<li>file system remote-mounted by  client</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Not Supported in Design Goals</dt>
<dd><ul class="first last">
<li><dl class="first docutils">
<dt>Replication transparency</dt>
<dd><ul class="first last simple">
<li>separate service for replication (NIS)</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Concurrency</dt>
<dd><ul class="first last simple">
<li>Naïve locking</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Scalability</dt>
<dd><ul class="first last simple">
<li>limited</li>
<li>originally designed to support 5-10 clients</li>
</ul>
</dd>
</dl>
</li>
</ul>
</dd>
</dl>
</li>
</ul>
</div></blockquote>
<div class="section" id="sun-nfs-implementation">
<h2>SUN NFS - Implementation<a class="headerlink" href="#sun-nfs-implementation" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><ul>
<li><dl class="first docutils">
<dt>VFS Layer</dt>
<dd><ul class="first last simple">
<li>maintains table with one entry for each open file</li>
<li>entry called v-node (indicates  whether local or remote)</li>
<li>v-node points to I-node (for local files) and r-node (for remote files)</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Typical Operation</dt>
<dd><ul class="first last">
<li><dl class="first docutils">
<dt>Read</dt>
<dd><ul class="first last simple">
<li>locate v-node</li>
<li>determine local or remote</li>
<li>transfer occurs in 8K (normally) byte blocks</li>
<li>automatic prefetching (read-ahead) of next block</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Write</dt>
<dd><ul class="first last simple">
<li>writes not immediately written to server</li>
<li>8K bytes collected before writing</li>
</ul>
</dd>
</dl>
</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Caching</dt>
<dd><ul class="first last">
<li><p class="first">server caches (to reduce disk accesses)</p>
</li>
<li><dl class="first docutils">
<dt>client maintains cache for</dt>
<dd><ul class="first last simple">
<li>for file attributes (I-nodes)</li>
<li>for file data</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>cache block consistency problems</dt>
<dd><ul class="first last simple">
<li>with each cache block is a timer</li>
<li>entry discarded when timer expired</li>
<li>when file opened- server checked for last modification of file</li>
</ul>
</dd>
</dl>
</li>
<li><p class="first">UNIX semantics not completely enforced</p>
</li>
</ul>
</dd>
</dl>
</li>
</ul>
</div></blockquote>
</div>
</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright 2013, George K. Thiruvathukal and Joe Kaylor.<br/>
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.3.1.<br/>
    </p>
  </div>
</footer>
  </body>
</html>